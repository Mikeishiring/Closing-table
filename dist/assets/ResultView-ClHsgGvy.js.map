{"version":3,"file":"ResultView-ClHsgGvy.js","sources":["../../src/api/results.js","../../src/views/ResultView.jsx"],"sourcesContent":["import { api, FRONTEND_BASE } from './client';\r\n\r\nexport async function getResult(resultId, options = {}) {\r\n  return api(`/api/results/${resultId}`, options);\r\n}\r\n\r\nexport function generateResultLink(resultId) {\r\n  const base = FRONTEND_BASE || (typeof window !== 'undefined'\r\n    ? `${window.location.origin}${window.location.pathname}`\r\n    : '');\r\n  return `${base}#result=${resultId}`;\r\n}\r\n\r\n\r\n","/**\n * Result View\n * Fetches and displays negotiation outcome\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { getResult } from '../api';\nimport { ResultCard } from '../components';\nimport { goHome } from '../routing';\nimport { PrimaryPanel } from '../components';\n\nexport function ResultView({ resultId }) {\n  const [result, setResult] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    async function fetchResult() {\n      try {\n        setLoading(true);\n        const data = await getResult(resultId);\n        \n        if (!data) {\n          setError('We couldn’t find this result.');\n          return;\n        }\n        \n        if (data.status === 'invalid') {\n          setError('This link doesn’t look right.');\n          return;\n        }\n        \n        if (data.status === 'expired') {\n          setError('This result has expired.');\n          return;\n        }\n        \n        setResult(data);\n      } catch (err) {\n        setError(err.message || 'We couldn’t load this result.');\n      } finally {\n        setLoading(false);\n      }\n    }\n    \n    fetchResult();\n  }, [resultId]);\n  \n  if (loading) {\n    return (\n      <PrimaryPanel className=\"space-y-6 animate-[cardIn_280ms_ease-out]\">\n        <div className=\"animate-pulse space-y-6\">\n          <div className=\"space-y-2 text-center\">\n            <div className=\"h-8 bg-slate-200 rounded w-1/3 mx-auto\" />\n            <div className=\"h-4 bg-slate-100 rounded w-2/3 mx-auto\" />\n          </div>\n          <div className=\"space-y-2\">\n            <div className=\"h-4 bg-slate-100 rounded w-1/4\" />\n            <div className=\"h-10 bg-slate-200 rounded w-full\" />\n            <div className=\"h-2 bg-slate-200 rounded-full w-full\" />\n          </div>\n          <div className=\"h-12 bg-slate-200 rounded-full w-full\" />\n        </div>\n      </PrimaryPanel>\n    );\n  }\n  \n  if (error) {\n    return (\n      <PrimaryPanel className=\"space-y-6 text-center animate-[cardIn_280ms_ease-out]\">\n        <div className=\"flex flex-col items-center space-y-3\">\n          <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-slate-50 ring-4 ring-rose-100 text-4xl text-rose-600 animate-[emojiPop_260ms_ease-out]\">\n            <span>⚠️</span>\n          </div>\n          <h2 className=\"text-2xl md:text-3xl font-semibold text-slate-900\">\n            We couldn’t show this result.\n          </h2>\n          <p className=\"text-slate-600\">{error}</p>\n        </div>\n        <div className=\"flex flex-col gap-3\">\n          <button\n            onClick={goHome}\n            className=\"w-full rounded-full bg-slate-900 text-white py-3 text-sm font-medium hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900 focus-visible:ring-offset-2 transition-all active:scale-[0.98]\"\n          >\n            Go to home\n          </button>\n        </div>\n      </PrimaryPanel>\n    );\n  }\n  \n  if (!result) {\n    return null;\n  }\n  \n  return (\n    <ResultCard\n      status={result.status}\n      finalOffer={result.final}\n      suggested={result.suggested}\n    />\n  );\n}\n\n\n"],"names":["getResult","resultId","options","api","ResultView","result","setResult","useState","loading","setLoading","error","setError","useEffect","fetchResult","data","err","PrimaryPanel","jsxs","jsx","goHome","ResultCard"],"mappings":"6GAEO,eAAeA,EAAUC,EAAUC,EAAU,GAAI,CACtD,OAAOC,EAAI,gBAAgBF,CAAQ,GAAIC,CAAO,CAChD,CCOO,SAASE,EAAW,CAAE,SAAAH,GAAY,CACvC,KAAM,CAACI,EAAQC,CAAS,EAAIC,EAAAA,SAAS,IAAI,EACnC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,IAAI,EAkCvC,OAhCAK,EAAAA,UAAU,IAAM,CACd,eAAeC,GAAc,CAC3B,GAAI,CACFJ,EAAW,EAAI,EACf,MAAMK,EAAO,MAAMd,EAAUC,CAAQ,EAErC,GAAI,CAACa,EAAM,CACTH,EAAS,+BAA+B,EACxC,MACF,CAEA,GAAIG,EAAK,SAAW,UAAW,CAC7BH,EAAS,+BAA+B,EACxC,MACF,CAEA,GAAIG,EAAK,SAAW,UAAW,CAC7BH,EAAS,0BAA0B,EACnC,MACF,CAEAL,EAAUQ,CAAI,CAChB,OAASC,EAAK,CACZJ,EAASI,EAAI,SAAW,+BAA+B,CACzD,QAAA,CACEN,EAAW,EAAK,CAClB,CACF,CAEAI,EAAA,CACF,EAAG,CAACZ,CAAQ,CAAC,EAETO,QAECQ,EAAA,CAAa,UAAU,4CACtB,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAA,CAAyC,EACxDA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCAAA,CAAyC,CAAA,EAC1D,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,gCAAA,CAAiC,EAChDA,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAA,CAAmC,EAClDA,EAAAA,IAAC,MAAA,CAAI,UAAU,sCAAA,CAAuC,CAAA,EACxD,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,uCAAA,CAAwC,CAAA,CAAA,CACzD,CAAA,CACF,EAIAR,EAEAO,EAAAA,KAACD,EAAA,CAAa,UAAU,wDACtB,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,uCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,oJACb,SAAAA,MAAC,OAAA,CAAK,cAAE,CAAA,CACV,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAoD,SAAA,gCAElE,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,iBAAkB,SAAAR,CAAA,CAAM,CAAA,EACvC,EACAQ,EAAAA,IAAC,MAAA,CAAI,UAAU,sBACb,SAAAA,EAAAA,IAAC,SAAA,CACC,QAASC,EACT,UAAU,sOACX,SAAA,YAAA,CAAA,CAED,CACF,CAAA,EACF,EAICd,EAKHa,EAAAA,IAACE,EAAA,CACC,OAAQf,EAAO,OACf,WAAYA,EAAO,MACnB,UAAWA,EAAO,SAAA,CAAA,EAPb,IAUX"}