import{r as i,j as e}from"./index-D4B_nToJ.js";import{c as w,e as N}from"./api-3RAAH5mw.js";const v={success:{emoji:"‚úÖ",color:"text-emerald-600",bgRing:"ring-emerald-100",title:"Deal Closed",line:"The mechanism found a fair middle ground and split the surplus 50/50.",actionIcon:"üîÅ"},close:{emoji:"ü§è",color:"text-amber-600",bgRing:"ring-amber-100",title:"Close, But Not Quite",line:"You're within the 10% bridge window. A human conversation could close the gap.",actionIcon:"üí¨"},fail:{emoji:"‚ùå",color:"text-rose-600",bgRing:"ring-rose-100",title:"No Deal Under This Mechanism",line:"The ranges are too far apart for a fair split under the rules you agreed to.",actionIcon:"üîç"}};function p(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function C(t,o=350){const[r,c]=i.useState(0),[x,s]=i.useState(!1);return i.useEffect(()=>{if(!t||t===0)return;const u=performance.now(),m=d=>{const l=Math.min((d-u)/o,1),h=1-Math.pow(1-l,3);c(Math.floor(t*h)),l<1?requestAnimationFrame(m):(c(t),setTimeout(()=>s(!0),100))};requestAnimationFrame(m)},[t,o]),{count:r,breathe:x}}function I({status:t,finalOffer:o,suggested:r,gapPercent:c,resultId:x}){const[s,u]=i.useState("emoji"),[m,d]=i.useState("Copy result link"),[l,h]=i.useState(!1),a=v[t],{count:f,breathe:y}=C(t==="success"?o:null,350);i.useEffect(()=>{const n=setTimeout(()=>u("details"),120);return()=>clearTimeout(n)},[]),i.useEffect(()=>{if(s==="details"){const n=document.getElementById("primary-action-btn");n&&n.focus()}},[s]);const b=async()=>{const n=N(x);(await w(n)).success&&(d("Copied ‚úì"),setTimeout(()=>d("Copy result link"),1500))},g=()=>{window.location.hash="",window.location.reload()},j=c||(t==="close"?8:null);return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-slate-900/70 p-4 animate-[fadeIn_280ms_ease-out]",children:[t==="success"&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 via-transparent to-transparent animate-pulse"}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsxs("div",{className:"relative bg-white rounded-3xl shadow-xl p-6 md:p-8 animate-[cardIn_280ms_ease-out]",children:[e.jsxs("header",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`
                mb-4 flex h-16 w-16 md:h-18 md:w-18 items-center justify-center rounded-full
                bg-slate-50 ring-4 ${a.bgRing}
                text-4xl md:text-5xl ${a.color}
                animate-[emojiPop_260ms_ease-out]
              `,children:e.jsx("span",{children:a.emoji})}),e.jsx("h1",{className:`text-2xl md:text-3xl font-semibold text-slate-900 transition-all duration-300 ${s==="details"?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:a.title}),e.jsx("p",{className:`mt-2 text-sm md:text-base text-slate-600 max-w-sm transition-all duration-300 delay-75 ${s==="details"?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:a.line})]}),e.jsxs("main",{className:`mt-6 space-y-4 transition-all duration-300 delay-150 ${s==="details"?"opacity-100 translate-y-0":"opacity-0 translate-y-2"}`,children:[t==="success"&&e.jsxs("section",{className:"text-center",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-500",children:"Final Offer"}),e.jsx("p",{className:`mt-1 text-4xl md:text-5xl font-semibold text-slate-900 ${y?"animate-[numberBreathe_400ms_ease-in-out]":""}`,children:p(f)}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Exactly between your ranges, without revealing either side's number."})]}),t==="close"&&e.jsxs("section",{className:"text-center space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.18em] text-slate-500",children:"Gap Size"}),e.jsxs("p",{className:"mt-1 text-3xl md:text-4xl font-semibold text-slate-900",children:[j.toFixed(1),"%"]})]}),e.jsx("p",{className:"text-xs text-slate-500 max-w-sm mx-auto",children:"You're within the 10% bridge window. The mechanism stops here so you can decide together whether to stretch."}),r&&e.jsxs("div",{className:"rounded-2xl bg-slate-50 px-4 py-3 text-xs text-slate-600",children:["Non-binding starting point: ",e.jsx("span",{className:"font-semibold",children:p(r)})]})]}),t==="fail"&&e.jsxs("section",{className:"text-center space-y-3",children:[e.jsxs("p",{className:"text-sm md:text-base text-slate-700 font-medium",children:["The gap is larger than ",e.jsx("span",{className:"text-rose-600",children:"10%"})," of the company's maximum."]}),e.jsx("p",{className:"text-xs text-slate-500 max-w-sm mx-auto",children:"The mechanism can't suggest a fair middle without asking one of you to cross your stated limits."})]})]}),e.jsxs("div",{className:`mt-6 flex flex-col gap-3 transition-all duration-300 delay-200 ${s==="details"?"opacity-100":"opacity-0"}`,children:[e.jsx("button",{id:"primary-action-btn",onClick:b,className:"w-full rounded-full bg-slate-900 text-white py-3 text-sm font-medium hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900 focus-visible:ring-offset-2 transition-all active:scale-[0.98]",children:m}),e.jsx("button",{onClick:g,className:"w-full rounded-full border border-slate-200 py-3 text-sm text-slate-700 hover:bg-slate-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 transition-all active:scale-[0.98]",children:t==="success"?`Start a new offer ${a.actionIcon}`:t==="close"?`Talk it through ${a.actionIcon}`:`Back to search ${a.actionIcon}`})]}),e.jsxs("button",{onClick:()=>h(!l),className:`mt-4 w-full flex items-center justify-center gap-2 text-[11px] text-slate-500 hover:text-slate-700 transition-all duration-300 delay-250 ${s==="details"?"opacity-100":"opacity-0"}`,children:[e.jsx("span",{children:"üîê"}),e.jsx("span",{children:"Outcome-only: neither side sees the other's number."})]}),l&&e.jsxs("div",{className:"mt-2 px-4 py-3 bg-slate-50 rounded-xl text-xs text-slate-600 animate-[slideDown_200ms_ease-out]",children:[e.jsx("p",{children:"‚Ä¢ Each side's original number stays private"}),e.jsx("p",{className:"mt-1",children:"‚Ä¢ Only this final outcome is shareable"}),e.jsx("p",{className:"mt-1",children:"‚Ä¢ The mechanism is single-use"})]})]})})]})}export{I as R};
//# sourceMappingURL=ResultCard-Cc0DAtfA.js.map
