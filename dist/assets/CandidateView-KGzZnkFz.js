import{r as i,j as e}from"./index-BaXPxj0K.js";import{f as r,S as g,A as v,L as d}from"./AnimatedSubmitButton-BzxAM7OZ.js";import{b as N,s as w}from"./api-PqKgA-tP.js";import{R as y}from"./ResultCard-BTcgUnrs.js";function O({offerId:c}){const[x,m]=i.useState(!0),[o,n]=i.useState(null),[a,f]=i.useState(1e5),[h,u]=i.useState(!1),[l,b]=i.useState(null);i.useEffect(()=>{async function s(){try{m(!0);const t=await N(c);if(!t){n("Offer not found");return}if(t.status==="invalid"){n("Invalid offer link");return}if(t.status==="expired"){n("Offer has expired");return}}catch(t){n(t.message||"Failed to load offer")}finally{m(!1)}}s()},[c]);const j=async()=>{try{if(u(!0),a<d.TOTAL_MIN||a>d.TOTAL_MAX)throw new Error(`Please keep your minimum between ${r(d.TOTAL_MIN)} and ${r(d.TOTAL_MAX)}.`);const s=await w(c,{min:a});let t=null;s.status==="close"?t=8:s.status==="fail"&&(t=15),b({status:s.status,finalOffer:s.final,suggested:s.suggested,gapPercent:t,resultId:s.resultId})}catch(s){alert("Error submitting response: "+s.message)}finally{u(!1)}};if(x)return e.jsx("div",{className:"bg-white rounded-3xl p-6 md:p-8 shadow-xl animate-[cardIn_280ms_ease-out]",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-8 bg-slate-200 rounded w-1/3 mx-auto"}),e.jsx("div",{className:"h-4 bg-slate-100 rounded w-2/3 mx-auto"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-slate-100 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-slate-200 rounded w-full"}),e.jsx("div",{className:"h-2 bg-slate-200 rounded-full w-full"})]}),e.jsx("div",{className:"h-12 bg-slate-200 rounded-full w-full"})]})});if(o)return e.jsxs("div",{className:"bg-white rounded-3xl p-6 md:p-8 shadow-xl animate-[cardIn_280ms_ease-out]",children:[e.jsxs("header",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-slate-50 ring-4 ring-rose-100 text-4xl text-rose-600 animate-[emojiPop_260ms_ease-out]",children:e.jsx("span",{children:"⚠️"})}),e.jsx("h1",{className:"text-2xl md:text-3xl font-semibold text-slate-900",children:"Oops"}),e.jsx("p",{className:"mt-2 text-sm md:text-base text-slate-600",children:o})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>window.location.hash="",className:"w-full rounded-full bg-slate-900 text-white py-3 text-sm font-medium hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900 focus-visible:ring-offset-2 transition-all active:scale-[0.98]",children:"Start over"})})]});if(l)return e.jsx(y,{status:l.status,finalOffer:l.finalOffer,suggested:l.suggested,gapPercent:l.gapPercent,resultId:l.resultId});const p=a;return e.jsxs("div",{className:"bg-white rounded-3xl p-6 md:p-8 shadow-xl animate-[cardIn_280ms_ease-out]",children:[e.jsx("div",{className:"inline-flex items-center justify-center px-3 py-1 mb-3 rounded-full bg-[#E6F9FA] text-xs font-medium text-[#007C80]",children:"Candidate view"}),e.jsx("h2",{className:"section-title mb-2",children:"Candidate View"}),e.jsx("p",{className:"section-lead mb-2",children:"Enter your minimum acceptable offer. The company will never see this number."}),e.jsxs("div",{className:"mb-6 inline-flex items-center gap-2 text-sm text-[#555]",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{children:"We only show the final number, never your inputs."})]}),e.jsxs("div",{className:"mb-6 flex items-center justify-center gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-emerald-500 text-white font-semibold",children:"✓"}),e.jsx("span",{className:"font-medium text-emerald-600",children:"Set Minimum"})]}),e.jsx("div",{className:"h-px w-8 bg-emerald-500"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-slate-900 text-white font-semibold",children:"2"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Submit"})]}),e.jsx("div",{className:"h-px w-8 bg-slate-300"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-slate-200 text-slate-500 font-semibold",children:"3"}),e.jsx("span",{className:"text-slate-500",children:"See Result"})]})]}),e.jsxs("div",{className:"space-y-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Minimum Base Salary"}),e.jsx("div",{className:"text-3xl font-bold mb-4",children:r(a)}),e.jsx(g,{value:a,min:5e4,max:3e5,step:5e3,onChange:s=>f(Number(s.target.value)),variant:"candidate",label:"Candidate minimum base"})]}),e.jsx("div",{className:"pt-4 border-t border-slate-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Total Minimum"}),e.jsx("span",{className:"text-2xl font-bold text-slate-900",children:r(p)})]})})]}),e.jsx(v,{onClick:j,buttonText:"Lock it in & See Result",disabled:h})]})}export{O as CandidateView};
//# sourceMappingURL=CandidateView-KGzZnkFz.js.map
