{"version":3,"file":"ResultView-B_a8nmUj.js","sources":["../../src/views/ResultView.jsx"],"sourcesContent":["/**\r\n * Result View\r\n * Fetches and displays negotiation outcome\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { getResult } from '../lib/api';\r\nimport { ResultCard } from '../components/ResultCard';\r\n\r\nexport function ResultView({ resultId }) {\r\n  const [result, setResult] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchResult() {\r\n      try {\r\n        setLoading(true);\r\n        const data = await getResult(resultId);\r\n        \r\n        if (!data) {\r\n          setError('Result not found');\r\n          return;\r\n        }\r\n        \r\n        if (data.status === 'invalid') {\r\n          setError('Invalid result link');\r\n          return;\r\n        }\r\n        \r\n        if (data.status === 'expired') {\r\n          setError('Result has expired');\r\n          return;\r\n        }\r\n        \r\n        setResult(data);\r\n      } catch (err) {\r\n        setError(err.message || 'Failed to load result');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    \r\n    fetchResult();\r\n  }, [resultId]);\r\n  \r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-4 border-slate-300 border-t-slate-900 mb-4\" />\r\n          <p className=\"text-slate-600\">Loading result...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\r\n        <div className=\"max-w-md w-full bg-white rounded-2xl p-8 shadow-lg text-center\">\r\n          <div className=\"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <svg className=\"w-8 h-8 text-rose-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </div>\r\n          <h2 className=\"text-2xl font-bold text-slate-900 mb-2\">Oops</h2>\r\n          <p className=\"text-slate-600 mb-6\">{error}</p>\r\n          <button\r\n            onClick={() => window.location.hash = ''}\r\n            className=\"bg-slate-900 text-white py-2 px-6 rounded-lg font-medium hover:bg-slate-800 transition-colors\"\r\n          >\r\n            Go to home\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (!result) {\r\n    return null;\r\n  }\r\n  \r\n  // Calculate gap percentage if applicable\r\n  let gapPercent = null;\r\n  if (result.status === 'close' && result.suggested) {\r\n    // Estimate gap from suggested midpoint\r\n    // This is approximate since we don't have the original values\r\n    gapPercent = 8; // Within bridge zone (< 10%)\r\n  } else if (result.status === 'fail') {\r\n    gapPercent = 15; // Above bridge zone\r\n  }\r\n  \r\n  return (\r\n    <ResultCard\r\n      status={result.status}\r\n      finalOffer={result.final}\r\n      suggested={result.suggested}\r\n      gapPercent={gapPercent}\r\n      resultId={resultId}\r\n    />\r\n  );\r\n}\r\n\r\n"],"names":["ResultView","resultId","result","setResult","useState","loading","setLoading","error","setError","useEffect","fetchResult","data","getResult","err","jsxs","jsx","gapPercent","ResultCard"],"mappings":"kIASO,SAASA,EAAW,CAAE,SAAAC,GAAY,CACvC,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,IAAI,EACnC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,IAAI,EAkCvC,GAhCAK,EAAAA,UAAU,IAAM,CACd,eAAeC,GAAc,CAC3B,GAAI,CACFJ,EAAW,EAAI,EACf,MAAMK,EAAO,MAAMC,EAAUX,CAAQ,EAErC,GAAI,CAACU,EAAM,CACTH,EAAS,kBAAkB,EAC3B,MACF,CAEA,GAAIG,EAAK,SAAW,UAAW,CAC7BH,EAAS,qBAAqB,EAC9B,MACF,CAEA,GAAIG,EAAK,SAAW,UAAW,CAC7BH,EAAS,oBAAoB,EAC7B,MACF,CAEAL,EAAUQ,CAAI,CAChB,OAASE,EAAK,CACZL,EAASK,EAAI,SAAW,uBAAuB,CACjD,QAAA,CACEP,EAAW,EAAK,CAClB,CACF,CAEAI,EAAA,CACF,EAAG,CAACT,CAAQ,CAAC,EAETI,EACF,aACG,MAAA,CAAI,UAAU,+DACb,SAAAS,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oGAAA,CAAqG,EACpHA,EAAAA,IAAC,IAAA,CAAE,UAAU,iBAAiB,SAAA,mBAAA,CAAiB,CAAA,CAAA,CACjD,CAAA,CACF,EAIJ,GAAIR,EACF,aACG,MAAA,CAAI,UAAU,+DACb,SAAAO,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mFACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBAAwB,KAAK,OAAO,QAAQ,YAAY,OAAO,eAC5E,SAAAA,EAAAA,IAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,sBAAA,CAAuB,CAAA,CAC9F,CAAA,CACF,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,yCAAyC,SAAA,OAAI,EAC3DA,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAuB,SAAAR,EAAM,EAC1CQ,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,OAAO,SAAS,KAAO,GACtC,UAAU,gGACX,SAAA,YAAA,CAAA,CAED,CAAA,CACF,CAAA,CACF,EAIJ,GAAI,CAACb,EACH,OAAO,KAIT,IAAIc,EAAa,KACjB,OAAId,EAAO,SAAW,SAAWA,EAAO,UAGtCc,EAAa,EACJd,EAAO,SAAW,SAC3Bc,EAAa,IAIbD,EAAAA,IAACE,EAAA,CACC,OAAQf,EAAO,OACf,WAAYA,EAAO,MACnB,UAAWA,EAAO,UAClB,WAAAc,EACA,SAAAf,CAAA,CAAA,CAGN"}