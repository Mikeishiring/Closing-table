{"version":3,"file":"client-DjLAMc_R.js","sources":["../../src/components/shared/PrimaryCard.jsx","../../src/components/shared/PrimaryPanel.jsx","../../src/api/client.js"],"sourcesContent":["import React from 'react';\n\n/**\n * Core frosted card used across the three pages.\n */\nexport function PrimaryCard({ title, subtitle, children, className = '', ...rest }) {\n  return (\n    <section className={`primary-card ${className}`} {...rest}>\n      {(title || subtitle) && (\n        <header className=\"primary-card__head\">\n          {title ? <h1 className=\"primary-card__title\">{title}</h1> : null}\n          {subtitle ? <p className=\"primary-card__subtitle\">{subtitle}</p> : null}\n        </header>\n      )}\n      <div className=\"primary-card__body\">{children}</div>\n    </section>\n  );\n}\n\n","import React from 'react';\nimport { PrimaryCard } from './PrimaryCard';\n\n/**\n * Alias of PrimaryCard for clarity in layout composition.\n */\nexport function PrimaryPanel(props) {\n  return <PrimaryCard {...props} />;\n}\n\n","/**\n * API Client Module\n * Centralized API calls with consistent error handling\n */\n\nconst API_BASE = (() => {\n  // Highest priority: explicitly configured API base\n  if (import.meta.env.VITE_API_BASE) {\n    console.log('[API Client] Using VITE_API_BASE:', import.meta.env.VITE_API_BASE);\n    return import.meta.env.VITE_API_BASE;\n  }\n\n  // If running locally (page served from localhost), talk to local backend\n  if (typeof window !== 'undefined') {\n    const host = window.location.hostname;\n    const isLocalHost =\n      host === 'localhost' ||\n      host === '127.0.0.1' ||\n      host === '0.0.0.0';\n    if (isLocalHost) {\n      console.log('[API Client] Localhost detected, using http://localhost:3001');\n      return 'http://localhost:3001';\n    }\n  }\n\n  // Default for hosted builds: use the hosted API\n  console.log('[API Client] Using production API');\n  return 'https://closing-table-backend.onrender.com';\n})();\n\n// Optional frontend base for shareable links\nconst FRONTEND_BASE =\n  import.meta.env.VITE_APP_BASE_URL ||\n  (typeof window !== 'undefined'\n    ? (() => {\n        // Get the full URL path without hash\n        const pathname = window.location.pathname;\n        // Remove index.html if present to get clean base path\n        const cleanPath = pathname.endsWith('index.html') \n          ? pathname.slice(0, -'index.html'.length)\n          : pathname.endsWith('/')\n          ? pathname\n          : pathname + '/';\n        return `${window.location.origin}${cleanPath}`;\n      })()\n    : '');\n\n// Add timeout support - increased for cold starts on hosted services\nconst DEFAULT_TIMEOUT = 30000; // 30 seconds\n\n/**\n * Generic API call wrapper with error handling and timeout\n */\nexport async function api(path, options = {}) {\n  const url = `${API_BASE}${path}`;\n  console.log('[API Client] Making request to:', url);\n  \n  const controller = options.signal ? null : new AbortController();\n  const config = {\n    headers: {\n      'Content-Type': 'application/json',\n      ...(options.headers || {}),\n    },\n    signal: options.signal || controller?.signal,\n    ...options,\n  };\n\n  // Create timeout promise with proper abort reason\n  let timeoutId;\n  const timeoutPromise = new Promise((_, reject) => {\n    timeoutId = setTimeout(() => {\n      if (controller) {\n        controller.abort('Request timeout - the server took too long to respond');\n      }\n      reject(new Error('Request timeout - the server took too long to respond. The backend may be starting up.'));\n    }, DEFAULT_TIMEOUT);\n  });\n\n  try {\n    const fetchPromise = fetch(url, config);\n    const res = await Promise.race([fetchPromise, timeoutPromise]);\n    \n    // Clear timeout if request completed successfully\n    if (timeoutId) clearTimeout(timeoutId);\n    \n    let data;\n\n    // Try to parse JSON response\n    try {\n      data = await res.json();\n    } catch {\n      // If JSON parse fails and response is not OK, throw generic error\n      if (!res.ok) {\n        throw new Error(`HTTP ${res.status}: ${res.statusText}`);\n      }\n      return null;\n    }\n\n    // If response is not OK, throw with error message from server or generic\n    if (!res.ok) {\n      throw new Error(data.error || `HTTP ${res.status}: ${res.statusText}`);\n    }\n\n    return data;\n  } catch (error) {\n    // Clear timeout on error\n    if (timeoutId) clearTimeout(timeoutId);\n    \n    // Handle abort errors with better messaging\n    if (error.name === 'AbortError') {\n      throw new Error('Request was cancelled. The server may be starting up - please try again.');\n    }\n    // Network errors or fetch failures\n    if (error instanceof TypeError) {\n      throw new Error('Network error. Please check your connection.');\n    }\n    throw error;\n  }\n}\n\nexport function isValidEmail(email) {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\nexport { API_BASE, FRONTEND_BASE, DEFAULT_TIMEOUT };\n\n\n"],"names":["PrimaryCard","title","subtitle","children","className","rest","jsxs","jsx","PrimaryPanel","props","API_BASE","host","FRONTEND_BASE","pathname","cleanPath","DEFAULT_TIMEOUT","api","path","options","url","controller","config","timeoutId","timeoutPromise","_","reject","fetchPromise","res","data","error"],"mappings":"wCAKO,SAASA,EAAY,CAAE,MAAAC,EAAO,SAAAC,EAAU,SAAAC,EAAU,UAAAC,EAAY,GAAI,GAAGC,GAAQ,CAClF,cACG,UAAA,CAAQ,UAAW,gBAAgBD,CAAS,GAAK,GAAGC,EACjD,SAAA,EAAAJ,GAASC,IACTI,EAAAA,KAAC,SAAA,CAAO,UAAU,qBACf,SAAA,CAAAL,EAAQM,EAAAA,IAAC,KAAA,CAAG,UAAU,sBAAuB,WAAM,EAAQ,KAC3DL,EAAWK,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAA0B,WAAS,EAAO,IAAA,EACrE,EAEFA,EAAAA,IAAC,MAAA,CAAI,UAAU,qBAAsB,SAAAJ,CAAA,CAAS,CAAA,EAChD,CAEJ,CCXO,SAASK,EAAaC,EAAO,CAClC,OAAOF,MAACP,EAAA,CAAa,GAAGS,CAAA,CAAO,CACjC,CCHA,MAAMC,GAAY,IAAM,CAQtB,GAAI,OAAO,OAAW,IAAa,CACjC,MAAMC,EAAO,OAAO,SAAS,SAK7B,GAHEA,IAAS,aACTA,IAAS,aACTA,IAAS,UAET,eAAQ,IAAI,8DAA8D,EACnE,uBAEX,CAGA,eAAQ,IAAI,mCAAmC,EACxC,4CACT,GAAA,EAGMC,EAEH,OAAO,OAAW,KACd,IAAM,CAEL,MAAMC,EAAW,OAAO,SAAS,SAE3BC,EAAYD,EAAS,SAAS,YAAY,EAC5CA,EAAS,MAAM,EAAG,GAAoB,EACtCA,EAAS,SAAS,GAAG,EACrBA,EACAA,EAAW,IACf,MAAO,GAAG,OAAO,SAAS,MAAM,GAAGC,CAAS,EAC9C,GAAA,EACA,GAGAC,EAAkB,IAKxB,eAAsBC,EAAIC,EAAMC,EAAU,GAAI,CAC5C,MAAMC,EAAM,GAAGT,CAAQ,GAAGO,CAAI,GAC9B,QAAQ,IAAI,kCAAmCE,CAAG,EAElD,MAAMC,EAAaF,EAAQ,OAAS,KAAO,IAAI,gBACzCG,EAAS,CACb,QAAS,CACP,eAAgB,mBAChB,GAAIH,EAAQ,SAAW,CAAA,CAAC,EAE1B,OAAQA,EAAQ,QAAUE,GAAY,OACtC,GAAGF,CAAA,EAIL,IAAII,EACJ,MAAMC,EAAiB,IAAI,QAAQ,CAACC,EAAGC,IAAW,CAChDH,EAAY,WAAW,IAAM,CACvBF,GACFA,EAAW,MAAM,uDAAuD,EAE1EK,EAAO,IAAI,MAAM,wFAAwF,CAAC,CAC5G,EAAGV,CAAe,CACpB,CAAC,EAED,GAAI,CACF,MAAMW,EAAe,MAAMP,EAAKE,CAAM,EAChCM,EAAM,MAAM,QAAQ,KAAK,CAACD,EAAcH,CAAc,CAAC,EAGzDD,gBAAwBA,CAAS,EAErC,IAAIM,EAGJ,GAAI,CACFA,EAAO,MAAMD,EAAI,KAAA,CACnB,MAAQ,CAEN,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,QAAQA,EAAI,MAAM,KAAKA,EAAI,UAAU,EAAE,EAEzD,OAAO,IACT,CAGA,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMC,EAAK,OAAS,QAAQD,EAAI,MAAM,KAAKA,EAAI,UAAU,EAAE,EAGvE,OAAOC,CACT,OAASC,EAAO,CAKd,MAHIP,gBAAwBA,CAAS,EAGjCO,EAAM,OAAS,aACX,IAAI,MAAM,0EAA0E,EAGxFA,aAAiB,UACb,IAAI,MAAM,8CAA8C,EAE1DA,CACR,CACF"}