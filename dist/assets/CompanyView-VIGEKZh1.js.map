{"version":3,"file":"CompanyView-VIGEKZh1.js","sources":["../../src/components/shared/SecondaryInfoPanel.jsx","../../src/components/shared/SecondaryPanel.jsx","../../src/api/clipboard.js","../../src/views/CompanyView.jsx"],"sourcesContent":["import React from 'react';\r\n\r\n/**\r\n * Secondary info box shown to the right of the primary card.\r\n */\r\nexport function SecondaryInfoPanel({ title, items = [], className = '' }) {\r\n  return (\r\n    <aside className={`secondary-info ${className}`}>\r\n      {title ? <p className=\"secondary-info__title\">{title}</p> : null}\r\n      {items.length ? (\r\n        <ul className=\"secondary-info__list\">\r\n          {items.map((item) => (\r\n            <li key={item} className=\"secondary-info__item\">\r\n              <span className=\"secondary-info__icon\">‚úì</span>\r\n              <span>{item}</span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : null}\r\n    </aside>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport { SecondaryInfoPanel } from './SecondaryInfoPanel';\r\n\r\n/**\r\n * Secondary panel wrapper with consistent styling.\r\n */\r\nexport function SecondaryPanel(props) {\r\n  return <SecondaryInfoPanel {...props} />;\r\n}\r\n\r\n","/**\r\n * Copy text to clipboard (with fallback)\r\n */\r\nexport async function copyToClipboard(text) {\r\n  const isSecure = typeof window !== 'undefined'\r\n    ? (window.isSecureContext || window.location.hostname === 'localhost')\r\n    : true;\r\n\r\n  if (!isSecure) {\r\n    return { success: false, error: 'Clipboard unavailable in insecure context' };\r\n  }\r\n\r\n  // Try modern clipboard API first\r\n  if (navigator.clipboard && navigator.clipboard.writeText) {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      return { success: true };\r\n    } catch (error) {\r\n      // Fall through to legacy method\r\n    }\r\n  }\r\n\r\n  // Fallback: hidden textarea method\r\n  try {\r\n    const textarea = document.createElement('textarea');\r\n    textarea.value = text;\r\n    textarea.style.position = 'fixed';\r\n    textarea.style.opacity = '0';\r\n    document.body.appendChild(textarea);\r\n    textarea.select();\r\n    const success = document.execCommand('copy');\r\n    document.body.removeChild(textarea);\r\n    return { success };\r\n  } catch (error) {\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n\r\n","/**\n * Company View\n * Where companies set their maximum offer\n */\n\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { PrimaryCard, PrimaryPanel, PrimarySlider, SecondaryPanel, SlideToConfirm, ValueInputSection } from '../components';\nimport { createOffer, generateOfferLink, copyToClipboard } from '../api';\nimport { LIMITS, parseMoneyInput, formatNumber } from '../lib/deal';\nimport { useFocusMode } from '../hooks';\nimport { PRIVACY_COPY, EXPIRY } from '../tokens';\n\nexport function CompanyView() {\n  const [totalMax, setTotalMax] = useState(120000);\n  const [totalInput, setTotalInput] = useState('120,000');\n  const [offerLink, setOfferLink] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const [isFocusing, setIsFocusing] = useState(false);\n  const [formError, setFormError] = useState('');\n  const { enable: enableFocusMode, disable: disableFocusMode } = useFocusMode();\n  const companyLinkCopy = useMemo(\n    () => PRIVACY_COPY.companyLink.replace('24 hours', `${EXPIRY.offerHours} hours`),\n    []\n  );\n\n  const resetForm = useCallback(() => {\n    setOfferLink(null);\n    setTotalMax(120000);\n    setTotalInput('120,000');\n    setFormError('');\n  }, []);\n\n  const handleSubmit = useCallback(async () => {\n    if (loading) return;\n    try {\n      setLoading(true);\n      setFormError('');\n      const response = await createOffer({\n        max: totalMax,\n      });\n      \n      const link = generateOfferLink(response.offerId);\n      setOfferLink(link);\n    } catch (error) {\n      setFormError(error.message || 'We could not create this offer. Please retry.');\n    } finally {\n      setLoading(false);\n    }\n  }, [loading, totalMax]);\n\n  const handleCopyLink = useCallback(async () => {\n    if (!offerLink) return;\n    const result = await copyToClipboard(offerLink);\n    if (result.success) {\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  }, [offerLink]);\n\n  const handleTotalInputChange = useCallback((val) => {\n    const { value, display } = parseMoneyInput(val, LIMITS);\n    setTotalInput(display);\n    setTotalMax(value);\n    setFormError('');\n  }, []);\n\n  if (offerLink) {\n    return (\n      <PrimaryCard className=\"animate-[cardIn_280ms_ease-out]\" data-focus-mode={isFocusing}>\n        <div className=\"card-flow\">\n          <header className=\"flex flex-col items-center text-center space-y-3\">\n            <div className=\"flex h-20 w-20 items-center justify-center rounded-3xl bg-gradient-to-br from-emerald-400 via-cyan-400 to-sky-500 text-white shadow-[0_20px_40px_-12px_rgba(14,165,233,0.55)] animate-[emojiPop_260ms_ease-out]\">\n              <svg width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\n                <path d=\"M5 13l4 4L19 7\" stroke=\"white\" strokeWidth=\"2.4\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n              </svg>\n            </div>\n            \n            <h1 className=\"text-3xl font-extrabold text-slate-900\">\n              Link ready\n            </h1>\n            \n            <p className=\"text-base text-slate-600 max-w-sm\">\n              {`${companyLinkCopy} This is the handshake‚Äîkeep it handy.`}\n            </p>\n          </header>\n          \n          <main className=\"space-y-4\">\n            <section className=\"space-y-3\">\n              <p className=\"text-xs uppercase tracking-[0.2em] text-slate-500\">\n                Shareable link\n              </p>\n              <div className=\"relative flex items-center rounded-2xl bg-slate-50 border border-slate-200 px-4 py-3 text-xs md:text-sm text-slate-800 font-mono\">\n                <span className=\"break-all pr-12\">{offerLink}</span>\n                <button\n                  onClick={handleCopyLink}\n                  className=\"absolute right-2 inline-flex items-center gap-1 rounded-xl px-3 py-2 text-xs font-semibold text-slate-700 bg-white border border-slate-200 shadow-sm hover:bg-slate-100 transition\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                    <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\" strokeWidth=\"2\" />\n                    <path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\" strokeWidth=\"2\" />\n                  </svg>\n                  {copied ? 'Copied' : 'Copy link'}\n                </button>\n              </div>\n              <p className=\"text-sm text-slate-500\">\n                Preview it or drop it in a note. The candidate only sees the final outcome.\n              </p>\n            </section>\n          </main>\n          \n          <div className=\"flex flex-col gap-3 focus-priority\">\n            <button\n              onClick={() => window.open(offerLink, '_blank', 'noopener')}\n              className=\"w-full rounded-full bg-slate-900 text-white py-3 text-sm font-semibold hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-900 focus-visible:ring-offset-2 transition-all active:scale-[0.98]\"\n            >\n              Open link\n            </button>\n\n            <button onClick={resetForm} className=\"w-full text-sm font-semibold text-slate-700 hover:underline py-2\">\n              New offer\n            </button>\n          </div>\n          \n          <div className=\"flex items-center justify-center gap-2 text-[12px] text-slate-500\">\n            <span>üîê</span>\n            <span>{companyLinkCopy}</span>\n          </div>\n        </div>\n      </PrimaryCard>\n    );\n  }\n\n  return (\n    <div className=\"page-grid\">\n      <PrimaryPanel\n        className=\"animate-[cardIn_280ms_ease-out]\"\n        title=\"Set your ceiling. Share one private link.\"\n        subtitle={`One-time link. Expires in ${EXPIRY.offerHours} hours.`}\n        data-focus-mode={isFocusing}\n      >\n        <div className=\"card-flow\">\n          <ValueInputSection\n            label=\"Maximum total compensation\"\n            inputValue={totalInput}\n            placeholder=\"120,000\"\n            onInputChange={handleTotalInputChange}\n            onFocus={() => {\n              setIsFocusing(true);\n              enableFocusMode();\n            }}\n            onBlur={() => {\n              setIsFocusing(false);\n              disableFocusMode();\n            }}\n          />\n\n          <PrimarySlider\n            label=\"Adjust maximum total compensation\"\n            value={totalMax}\n            min={LIMITS.TOTAL_MIN}\n            max={LIMITS.TOTAL_MAX}\n            step={5000}\n            onChange={(e) => {\n              const next = Number(e.target.value);\n              setTotalMax(next);\n              setTotalInput(formatNumber(next));\n              setFormError('');\n            }}\n            variant=\"company\"\n            enableSnapPoints={false}\n            thumbEmoji={null}\n            onDragStart={() => {\n              setIsFocusing(true);\n              enableFocusMode();\n            }}\n            onDragEnd={() => {\n              setIsFocusing(false);\n              disableFocusMode();\n            }}\n          />\n\n          <section className=\"card-block card-block--cta\">\n            <div className=\"cta-stack\">\n              <SlideToConfirm\n                text=\"Slide to Lock Offer\"\n                onConfirm={handleSubmit}\n                loading={loading}\n                disabled={loading}\n              />\n              {formError ? (\n                <p className=\"cta-error\" role=\"alert\" aria-live=\"polite\">\n                  <span aria-hidden=\"true\">‚ö†Ô∏è</span>\n                  <span>{formError}</span>\n                </p>\n              ) : (\n                <div className=\"privacy-note\" aria-live=\"polite\">\n                  <span>üîê</span>\n                  <span>{companyLinkCopy}</span>\n                </div>\n              )}\n            </div>\n          </section>\n        </div>\n      </PrimaryPanel>\n\n      <SecondaryPanel\n        title=\"For hiring teams\"\n        items={[\n          'Set a ceiling without revealing it.',\n          'Share one link that auto-expires.',\n        ]}\n      />\n    </div>\n  );\n}\n\n"],"names":["SecondaryInfoPanel","title","items","className","jsxs","jsx","item","SecondaryPanel","props","copyToClipboard","text","textarea","success","error","CompanyView","totalMax","setTotalMax","useState","totalInput","setTotalInput","offerLink","setOfferLink","loading","setLoading","copied","setCopied","isFocusing","setIsFocusing","formError","setFormError","enableFocusMode","disableFocusMode","useFocusMode","companyLinkCopy","useMemo","PRIVACY_COPY","EXPIRY","resetForm","useCallback","handleSubmit","response","createOffer","link","generateOfferLink","handleCopyLink","handleTotalInputChange","val","value","display","parseMoneyInput","LIMITS","PrimaryCard","PrimaryPanel","ValueInputSection","PrimarySlider","e","next","formatNumber","SlideToConfirm"],"mappings":"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"}