import{r as o,b as L,s as C,u as A,c as O,j as n,m as v,A as $,S as P}from"./index-DncJgOrx.js";import{b as j,F as B}from"./client-CZUYQNwL.js";function Z(){const e=o.useRef(0),t=o.useCallback(()=>{e.current+=1,e.current===1&&document.body.classList.add("focus-mode")},[]),r=o.useCallback(()=>{e.current=Math.max(0,e.current-1),e.current===0&&document.body.classList.remove("focus-mode")},[]);return o.useEffect(()=>()=>{e.current=0,document.body.classList.remove("focus-mode")},[]),{enable:t,disable:r}}function T(e){e.values.forEach(t=>t.stop())}function w(e,t){[...t].reverse().forEach(a=>{const s=e.getVariant(a);s&&C(e,s),e.variantChildren&&e.variantChildren.forEach(c=>{w(c,t)})})}function F(e,t){if(Array.isArray(t))return w(e,t);if(typeof t=="string")return w(e,[t]);C(e,t)}function I(){const e=new Set,t={subscribe(r){return e.add(r),()=>void e.delete(r)},start(r,a){const s=[];return e.forEach(c=>{s.push(L(c,r,{transitionOverride:a}))}),Promise.all(s)},set(r){return e.forEach(a=>{F(a,r)})},stop(){e.forEach(r=>{T(r)})},mount(){return()=>{t.stop()}}};return t}function V(){const e=A(I);return O(e.mount,[]),e}const z=V;function q({text:e="Slide to Lock Offer",onConfirm:t,loading:r=!1,disabled:a=!1}){const s=o.useRef(null),[c,i]=o.useState(0),[h,x]=o.useState(!1),[d,g]=o.useState(!1),p=z(),f=44,[N,M]=o.useState({left:0,right:0});o.useEffect(()=>{const l=()=>{if(!s.current)return;const u=s.current.getBoundingClientRect().width||0,m=Math.max(0,u-f);M({left:0,right:m})};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]);const S=o.useCallback(()=>{i(0),g(!1),x(!1)},[]);o.useEffect(()=>{!r&&d&&S()},[r,d,S]);const _=o.useCallback(l=>{if(!s.current)return 0;const u=s.current.getBoundingClientRect().width;if(!u)return 0;const m=(l+f/2)/u*100;return Math.min(100,Math.max(0,m))},[]),k=(l,u)=>{if(!s.current)return;const m=s.current.getBoundingClientRect().width,y=Math.min(Math.max(u.offset.x,0),Math.max(0,m-f)),b=_(y);i(b)},E=async l=>{if(!(a||r)&&(l.key==="Enter"||l.key===" ")){if(l.preventDefault(),!s.current)return;const u=s.current.getBoundingClientRect().width;g(!0),i(100),await p.start({x:Math.max(0,u-f)}),t?.()}},R=async(l,u)=>{if(!s.current)return;const m=s.current.getBoundingClientRect().width;x(!1);const y=Math.min(Math.max(u?.offset?.x??0,0),Math.max(0,m-f)),b=_(y);i(b),b>=95&&!d&&!r?(g(!0),i(100),await p.start({x:Math.max(0,m-f)}),t?.()):(i(0),await p.start({x:0}))},D=()=>a||r||d?!1:(x(!0),!0);return n.jsx("div",{className:"slide-cta focus-priority",children:n.jsxs("div",{ref:s,className:`slide-track relative w-full overflow-hidden select-none ${a?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,style:{touchAction:"none",height:"56px",borderRadius:"999px",border:"1px solid var(--border-subtle)",background:"rgba(255,255,255,0.9)",boxShadow:"0 18px 40px -28px rgba(7,11,24,0.45), inset 0 1px 0 rgba(255,255,255,0.8)"},role:"slider",tabIndex:a?-1:0,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(c),"aria-valuetext":d?"Locked":e,"aria-label":e,onKeyDown:E,children:[n.jsx("div",{className:"absolute inset-y-0 left-0",style:{width:`${c}%`,background:"var(--accent-primary)",transition:h?"none":"width 180ms ease",opacity:d||r?.28:.2}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:n.jsx("span",{className:"cta-label transition-opacity","aria-live":"polite",style:{opacity:1-Math.min(c/100,1)},children:e})}),n.jsx(v.div,{className:"absolute top-1/2 -translate-y-1/2 flex items-center justify-center",drag:"x",dragConstraints:{left:N.left,right:N.right},dragElastic:0,dragMomentum:!1,onDragStart:D,onDrag:k,onDragEnd:R,animate:p,initial:{x:0},style:{touchAction:"none",height:"44px",width:"44px",borderRadius:"50%",backgroundColor:"var(--bg-card-strong, #fff)",border:"1px solid var(--border-subtle)",boxShadow:"0 12px 30px -20px rgba(7,11,24,0.48), 0 2px 10px -8px rgba(7,11,24,0.32)"},whileTap:{scale:1.02},whileHover:!a&&!r?{scale:1.01}:void 0,children:n.jsx($,{mode:"wait",children:r?n.jsx(v.div,{className:"h-5 w-5 rounded-full border-2 border-slate-300 border-t-emerald-500 animate-spin"},"spinner"):n.jsx(v.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},className:"text-slate-600 text-lg",children:d?"ðŸ”’":"â†’"},"arrow")})})]})})}function H({value:e,onChange:t,onFocus:r,onBlur:a,prefix:s="$",ariaLabel:c="Amount"}){const i=o.useRef(null);return n.jsxs("div",{className:"money-number",onClick:()=>i.current?.focus(),children:[s?n.jsx("span",{className:"money-number__prefix",children:s}):null,n.jsx("input",{ref:i,className:"money-number__input",value:e,onChange:h=>t?.(h.target.value),onFocus:r,onBlur:a,inputMode:"numeric","aria-label":c})]})}function G({label:e,displayValue:t,inputValue:r,onInputChange:a,onFocus:s,onBlur:c,prefix:i="$",helper:h,placeholder:x,inputMode:d="numeric",id:g,displayAsInput:p=!0}){return n.jsxs("section",{className:"value-section",children:[e?n.jsx("p",{className:"value-section__label",children:e}):null,p?n.jsx(H,{value:r??t,onChange:a,onFocus:s,onBlur:c,prefix:i,ariaLabel:e}):n.jsxs(n.Fragment,{children:[t?n.jsx("div",{className:"value-section__display",children:t}):null,n.jsxs("div",{className:"value-input",children:[i?n.jsx("span",{className:"value-input__prefix",children:i}):null,n.jsx("input",{id:g,className:"value-input__field",value:r,placeholder:x,onFocus:s,onBlur:c,onChange:f=>a?.(f.target.value),inputMode:d,"aria-label":e})]})]}),h?n.jsx("p",{className:"value-section__helper",children:h}):null]})}function Q({label:e,helper:t,...r}){return n.jsxs("section",{className:"primary-slider",children:[e?n.jsx("p",{className:"primary-slider__label",children:e}):null,n.jsx(P,{...r}),t?n.jsx("p",{className:"primary-slider__helper",children:t}):null]})}async function U(e,t={}){return j("/api/offers",{method:"POST",body:JSON.stringify(e),...t})}async function W(e,t={}){return j(`/api/offers/${e}`,t)}async function Y(e,t,r={}){return j(`/api/offers/${e}/submit`,{method:"POST",body:JSON.stringify(t),...r})}function ee(e){return`${B||(typeof window<"u"?`${window.location.origin}${window.location.pathname}`:"")}#offer=${e}`}export{Q as P,q as S,G as V,W as a,U as c,ee as g,Y as s,Z as u};
//# sourceMappingURL=offers-DJwQVQdK.js.map
