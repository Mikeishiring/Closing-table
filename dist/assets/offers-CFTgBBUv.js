import{r as i,b as A,s as k,u as O,d as T,j as r,m as v,A as P,S as $}from"./index-KV9ASIHf.js";import{b as w,F as z}from"./client-DjLAMc_R.js";function X(){const e=i.useRef(0),t=i.useCallback(()=>{e.current+=1,e.current===1&&document.body.classList.add("focus-mode")},[]),s=i.useCallback(()=>{e.current=Math.max(0,e.current-1),e.current===0&&document.body.classList.remove("focus-mode")},[]);return i.useEffect(()=>()=>{e.current=0,document.body.classList.remove("focus-mode")},[]),{enable:t,disable:s}}function I(e){e.values.forEach(t=>t.stop())}function j(e,t){[...t].reverse().forEach(a=>{const n=e.getVariant(a);n&&k(e,n),e.variantChildren&&e.variantChildren.forEach(c=>{j(c,t)})})}function B(e,t){if(Array.isArray(t))return j(e,t);if(typeof t=="string")return j(e,[t]);k(e,t)}function F(){const e=new Set,t={subscribe(s){return e.add(s),()=>{e.delete(s)}},start(s,a){const n=[];return e.forEach(c=>{n.push(A(c,s,{transitionOverride:a}))}),Promise.all(n)},set(s){return e.forEach(a=>{B(a,s)})},stop(){e.forEach(s=>{I(s)})},mount(){return()=>{t.stop()}}};return t}function H(){const e=O(F);return T(e.mount,[]),e}const V=H;function Z({text:e="Slide to Lock Offer",onConfirm:t,loading:s=!1,disabled:a=!1}){const n=i.useRef(null),[c,o]=i.useState(0),[m,b]=i.useState(!1),[f,y]=i.useState(!1),p=V(),u=44,[N,M]=i.useState({left:0,right:0}),[d,C]=i.useState(0);i.useEffect(()=>{const l=()=>{if(!n.current)return;const x=n.current.getBoundingClientRect().width||0;C(x);const g=Math.max(0,x-u);M({left:0,right:g})};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[u]);const S=i.useCallback(()=>{o(0),y(!1),b(!1)},[]);i.useEffect(()=>{!s&&f&&S()},[s,f,S]);const _=i.useCallback(l=>{if(!d)return 0;const h=l/(d-u)*100;return Math.min(100,Math.max(0,h))},[d,u]),E=(l,h)=>{if(!d)return;const x=Math.min(Math.max(h.offset.x,0),Math.max(0,d-u)),g=_(x);o(g)},D=async l=>{a||s||(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),y(!0),o(100),await p.start({x:Math.max(0,d-u)}),t?.())},L=async(l,h)=>{b(!1);const x=Math.min(Math.max(h?.offset?.x??0,0),Math.max(0,d-u)),g=_(x);o(g),g>=92&&!f&&!s?(y(!0),o(100),await p.start({x:Math.max(0,d-u),transition:{type:"spring",damping:25,stiffness:350}}),t?.()):(o(0),await p.start({x:0,transition:{type:"spring",damping:28,stiffness:400}}))},R=()=>a||s||f?!1:(b(!0),!0);return r.jsx("div",{className:"slide-cta focus-priority",children:r.jsxs("div",{ref:n,className:`slide-track relative w-full overflow-hidden select-none ${a?"opacity-60 cursor-not-allowed":"cursor-pointer"}`,style:{touchAction:"none",height:"56px",borderRadius:"999px",border:"1px solid rgba(0, 0, 0, 0.06)",background:"#ffffff",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.06)"},role:"slider",tabIndex:a?-1:0,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(c),"aria-valuetext":f?"Locked":e,"aria-label":e,onKeyDown:D,children:[r.jsx("div",{className:"absolute inset-y-0 left-0",style:{width:`${c}%`,background:"linear-gradient(90deg, #3b82f6 0%, #6366f1 50%, #8b5cf6 100%)",transition:m?"none":"width 220ms cubic-bezier(0.4, 0, 0.2, 1)",opacity:f||s?.3:.2,borderRadius:"999px"}}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("span",{className:"cta-label transition-opacity","aria-live":"polite",style:{opacity:1-Math.min(c/100,1)},children:e})}),r.jsx(v.div,{className:"absolute top-1/2 left-[6px] flex items-center justify-center",drag:"x",dragConstraints:{left:N.left,right:N.right},dragElastic:.05,dragMomentum:!1,dragTransition:{power:.15,timeConstant:150},onDragStart:R,onDrag:E,onDragEnd:L,animate:p,initial:{x:0},style:{touchAction:"none",height:"44px",width:"44px",marginTop:"-22px",borderRadius:"50%",backgroundColor:"#ffffff",border:"1px solid rgba(0, 0, 0, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.06)",cursor:m?"grabbing":"grab"},whileTap:{scale:.96},whileHover:!a&&!s?{scale:1.04}:void 0,transition:{type:"spring",damping:30,stiffness:400},children:r.jsx(P,{mode:"wait",children:s?r.jsx(v.div,{className:"h-5 w-5 rounded-full border-2 border-slate-300 border-t-emerald-500 animate-spin"},"spinner"):r.jsx(v.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"flex items-center justify-center text-slate-700 font-semibold",style:{fontSize:"20px",lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},children:f?"ðŸ”’":"â†’"},"arrow")})})]})})}function J({value:e,onChange:t,onFocus:s,onBlur:a,prefix:n="$",ariaLabel:c="Amount"}){const o=i.useRef(null);return r.jsxs("div",{className:"money-number",onClick:()=>o.current?.focus(),children:[n?r.jsx("span",{className:"money-number__prefix",children:n}):null,r.jsx("input",{ref:o,className:"money-number__input",value:e,onChange:m=>t?.(m.target.value),onFocus:s,onBlur:a,inputMode:"numeric","aria-label":c})]})}function q({label:e,displayValue:t,inputValue:s,onInputChange:a,onFocus:n,onBlur:c,prefix:o="$",helper:m,placeholder:b,inputMode:f="numeric",id:y,displayAsInput:p=!0}){return r.jsxs("section",{className:"value-section",children:[e?r.jsx("p",{className:"value-section__label",children:e}):null,p?r.jsx(J,{value:s??t,onChange:a,onFocus:n,onBlur:c,prefix:o,ariaLabel:e}):r.jsxs(r.Fragment,{children:[t?r.jsx("div",{className:"value-section__display",children:t}):null,r.jsxs("div",{className:"value-input",children:[o?r.jsx("span",{className:"value-input__prefix",children:o}):null,r.jsx("input",{id:y,className:"value-input__field",value:s,placeholder:b,onFocus:n,onBlur:c,onChange:u=>a?.(u.target.value),inputMode:f,"aria-label":e})]})]}),m?r.jsx("p",{className:"value-section__helper",children:m}):null]})}function G({label:e,helper:t,...s}){return r.jsxs("section",{className:"primary-slider",children:[e?r.jsx("p",{className:"primary-slider__label",children:e}):null,r.jsx($,{...s}),t?r.jsx("p",{className:"primary-slider__helper",children:t}):null]})}async function Q(e,t={}){return w("/api/offers",{method:"POST",body:JSON.stringify(e),...t})}async function U(e,t={}){return w(`/api/offers/${e}`,t)}async function Y(e,t,s={}){return w(`/api/offers/${e}/submit`,{method:"POST",body:JSON.stringify(t),...s})}function ee(e){return`${z}#offer=${e}`}export{G as P,Z as S,q as V,U as a,Q as c,ee as g,Y as s,X as u};
//# sourceMappingURL=offers-CFTgBBUv.js.map
