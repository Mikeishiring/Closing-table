{"version":3,"file":"api-3RAAH5mw.js","sources":["../../src/lib/api.js"],"sourcesContent":["/**\r\n * API Client Module\r\n * Centralized API calls with consistent error handling\r\n */\r\n\r\nconst API_BASE = import.meta.env.VITE_API_BASE || \r\n  (window.location.hostname === 'localhost' \r\n    ? 'http://localhost:3000' \r\n    : 'https://closing-table-backend.onrender.com');\r\n\r\n// Add timeout support\r\nconst DEFAULT_TIMEOUT = 10000; // 10 seconds\r\n\r\n/**\r\n * Generic API call wrapper with error handling and timeout\r\n */\r\nasync function api(path, options = {}) {\r\n  const url = `${API_BASE}${path}`;\r\n  \r\n  const config = {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      ...(options.headers || {}),\r\n    },\r\n    ...options,\r\n  };\r\n\r\n  // Create timeout promise\r\n  const timeoutPromise = new Promise((_, reject) => {\r\n    setTimeout(() => reject(new Error('Request timeout')), DEFAULT_TIMEOUT);\r\n  });\r\n\r\n  try {\r\n    const fetchPromise = fetch(url, config);\r\n    const res = await Promise.race([fetchPromise, timeoutPromise]);\r\n    let data;\r\n\r\n    // Try to parse JSON response\r\n    try {\r\n      data = await res.json();\r\n    } catch {\r\n      // If JSON parse fails and response is not OK, throw generic error\r\n      if (!res.ok) {\r\n        throw new Error(`HTTP ${res.status}: ${res.statusText}`);\r\n      }\r\n      return null;\r\n    }\r\n\r\n    // If response is not OK, throw with error message from server or generic\r\n    if (!res.ok) {\r\n      throw new Error(data.error || `HTTP ${res.status}: ${res.statusText}`);\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    // Network errors or fetch failures\r\n    if (error instanceof TypeError) {\r\n      throw new Error('Network error. Please check your connection.');\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Create a new offer (Company side)\r\n */\r\nexport async function createOffer(offerData) {\r\n  return api('/api/offers', {\r\n    method: 'POST',\r\n    body: JSON.stringify(offerData),\r\n  });\r\n}\r\n\r\n/**\r\n * Get offer details (Candidate side)\r\n */\r\nexport async function getOffer(offerId) {\r\n  return api(`/api/offers/${offerId}`);\r\n}\r\n\r\n/**\r\n * Submit candidate response\r\n */\r\nexport async function submitResponse(offerId, responseData) {\r\n  return api(`/api/offers/${offerId}/response`, {\r\n    method: 'POST',\r\n    body: JSON.stringify(responseData),\r\n  });\r\n}\r\n\r\n/**\r\n * Get result by ID\r\n */\r\nexport async function getResult(resultId) {\r\n  return api(`/api/results/${resultId}`);\r\n}\r\n\r\n/**\r\n * Validate email format\r\n */\r\nexport function isValidEmail(email) {\r\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return emailRegex.test(email);\r\n}\r\n\r\n/**\r\n * Generate shareable link for offer\r\n */\r\nexport function generateOfferLink(offerId) {\r\n  return `${window.location.origin}${window.location.pathname}#offer=${offerId}`;\r\n}\r\n\r\n/**\r\n * Generate shareable link for result\r\n */\r\nexport function generateResultLink(resultId) {\r\n  return `${window.location.origin}${window.location.pathname}#result=${resultId}`;\r\n}\r\n\r\n/**\r\n * Copy text to clipboard (with fallback)\r\n */\r\nexport async function copyToClipboard(text) {\r\n  // Try modern clipboard API first\r\n  if (navigator.clipboard && navigator.clipboard.writeText) {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      return { success: true };\r\n    } catch (error) {\r\n      // Fall through to legacy method\r\n    }\r\n  }\r\n\r\n  // Fallback: hidden textarea method\r\n  try {\r\n    const textarea = document.createElement('textarea');\r\n    textarea.value = text;\r\n    textarea.style.position = 'fixed';\r\n    textarea.style.opacity = '0';\r\n    document.body.appendChild(textarea);\r\n    textarea.select();\r\n    const success = document.execCommand('copy');\r\n    document.body.removeChild(textarea);\r\n    return { success };\r\n  } catch (error) {\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n"],"names":["API_BASE","DEFAULT_TIMEOUT","api","path","options","url","config","timeoutPromise","_","reject","fetchPromise","res","data","error","createOffer","offerData","getOffer","offerId","getResult","resultId","generateOfferLink","generateResultLink","copyToClipboard","text","textarea","success"],"mappings":"AAKA,MAAMA,EACH,OAAO,SAAS,WAAa,YAC1B,wBACA,6CAGAC,EAAkB,IAKxB,eAAeC,EAAIC,EAAMC,EAAU,GAAI,CACrC,MAAMC,EAAM,GAAGL,CAAQ,GAAGG,CAAI,GAExBG,EAAS,CACb,QAAS,CACP,eAAgB,mBAChB,GAAIF,EAAQ,SAAW,CAAA,CAAC,EAE1B,GAAGA,CAAA,EAICG,EAAiB,IAAI,QAAQ,CAACC,EAAGC,IAAW,CAChD,WAAW,IAAMA,EAAO,IAAI,MAAM,iBAAiB,CAAC,EAAGR,CAAe,CACxE,CAAC,EAED,GAAI,CACF,MAAMS,EAAe,MAAML,EAAKC,CAAM,EAChCK,EAAM,MAAM,QAAQ,KAAK,CAACD,EAAcH,CAAc,CAAC,EAC7D,IAAIK,EAGJ,GAAI,CACFA,EAAO,MAAMD,EAAI,KAAA,CACnB,MAAQ,CAEN,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,QAAQA,EAAI,MAAM,KAAKA,EAAI,UAAU,EAAE,EAEzD,OAAO,IACT,CAGA,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMC,EAAK,OAAS,QAAQD,EAAI,MAAM,KAAKA,EAAI,UAAU,EAAE,EAGvE,OAAOC,CACT,OAASC,EAAO,CAEd,MAAIA,aAAiB,UACb,IAAI,MAAM,8CAA8C,EAE1DA,CACR,CACF,CAKA,eAAsBC,EAAYC,EAAW,CAC3C,OAAOb,EAAI,cAAe,CACxB,OAAQ,OACR,KAAM,KAAK,UAAUa,CAAS,CAAA,CAC/B,CACH,CAKA,eAAsBC,EAASC,EAAS,CACtC,OAAOf,EAAI,eAAee,CAAO,EAAE,CACrC,CAeA,eAAsBC,EAAUC,EAAU,CACxC,OAAOjB,EAAI,gBAAgBiB,CAAQ,EAAE,CACvC,CAaO,SAASC,EAAkBH,EAAS,CACzC,MAAO,GAAG,OAAO,SAAS,MAAM,GAAG,OAAO,SAAS,QAAQ,UAAUA,CAAO,EAC9E,CAKO,SAASI,EAAmBF,EAAU,CAC3C,MAAO,GAAG,OAAO,SAAS,MAAM,GAAG,OAAO,SAAS,QAAQ,WAAWA,CAAQ,EAChF,CAKA,eAAsBG,EAAgBC,EAAM,CAE1C,GAAI,UAAU,WAAa,UAAU,UAAU,UAC7C,GAAI,CACF,aAAM,UAAU,UAAU,UAAUA,CAAI,EACjC,CAAE,QAAS,EAAA,CACpB,MAAgB,CAEhB,CAIF,GAAI,CACF,MAAMC,EAAW,SAAS,cAAc,UAAU,EAClDA,EAAS,MAAQD,EACjBC,EAAS,MAAM,SAAW,QAC1BA,EAAS,MAAM,QAAU,IACzB,SAAS,KAAK,YAAYA,CAAQ,EAClCA,EAAS,OAAA,EACT,MAAMC,EAAU,SAAS,YAAY,MAAM,EAC3C,gBAAS,KAAK,YAAYD,CAAQ,EAC3B,CAAE,QAAAC,CAAA,CACX,OAASZ,EAAO,CACd,MAAO,CAAE,QAAS,GAAO,MAAOA,EAAM,OAAA,CACxC,CACF"}